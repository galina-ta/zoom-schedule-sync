# Язык Kotlin

## Выражение

Выражение - это фрагмент кода, выполнение которого приводит к получению значения.

К выражениям относятся 
- литералы (например, в коде написано число 5 или текст "в кавычках")
- вызов функции с передачей параметров
- конструкция if/else

Примеры выражений: 
```kotlin
// имеет тип Int
5

// имеет тип String
"hello"

// имеет тип Boolean
true

// имеет тип Boolean
false

// имеет тип Int
if (true) 5 else 3

//имеет тип Boolean
5 == 3

//имеет тип Unit (возвращает подтверждение, что оно выполнилось. Это значение не нужно использовать)
if (5 == 3){
    print (123) 
} else {
    print (321)
}

имеет тип Int
if (5 == 3){
    print (123) 
    7
} else {
    print (321)
    9
}

// имеет тип Int
if (5 == 3){
    7
} else {
    if (true){
        8
    } else {
        9
    }
}

```

## Функция main

эту функцию запускает исполнитель, все остальные функции должны быть вызваны из этой функции

# Синтаксис

## Функции

Функция без аргументов

```kotlin
fun main() {}
```

Функция с аргументами

```kotlin
fun exportInGoogleCalendar(schedule: List<ScheduleEntry>) {} 
```

Функция с аргументами и возвращаемым значением

```kotlin
fun parseShort(document: XWPFDocument, docxName: String): List<ScheduleEntry> {}
```

Функция, которая принимает другую функцию в качестве аргумента (принимает переменную-функцию)

Переменные-функции позволяют дать возможность переопределить часть алгоритма тому, кто использует
функцию. Например, функция `formatInts` всегда преобразует список целых чисел в список текстов
такого же размера, но позволяет переопределить правило преобразования целых чисел в текст тому, кто
использует функцию `formatInts`

```kotlin
// отформатировать список целых чисел
fun formatInts(
    //список целых чисел
    ints: List<Int>,
    // правило преобразования
    transform: (Int) -> String
// вернет отформатированный список
): List<String> {
    // создаем пустой изменяемый список текстов, в который будем складывать отформатированные числа
    val result = mutableListOf<String>()
    // для каждого числа списка
    ints.forEach(action = { i ->
        // преобразуем целое число в текст по правилу, которое нам передали
        val s = transform(i)
        // добавляем преобразованное число в список отформатированных чисел
        result.add(s)
    })
    // возвращаем список отформатированных чисел тому, кто вызвал функцию formatInts
    return result
}
fun main() {
    val formatted = formatInts(ints = listOf(1, 2, 3), transform = { i ->
        "число $i"
    })
    println(formatted)
}
```

# Стандартные функции Kotlin

## Функция map

Преобразует список произвольного типа в другой список такого же размера по заданному правилу. Типы
исходного списка и преобразованного списка могут быть различными.

Тип параметра функции передаваемой в параметр `transform` совпадает с типом элементов списка, у
которого мы вызываем `map`.

Тип элементов преобразованного списка совпадает с возвращаемым значением функции, переданной
в `transform`.

Например,

```kotlin
fun main() {
    // formatted - это список из чисел 1, 2, 3 
    val formatted = listOf(1, 2, 3)
        // преобразованный в список строк
        .map(
            // по следующему правилу: число из исходного списка (i) преобразуется 
            // в строку в преобразованном списке, состоящую из текста "число", пробела и самого числа
            transform = { i -> "число $i" }
        )
    // напечатать в консоль преобразованный список ( число 1, число 2, число 3)
    println(formatted)
}
```

## Функция mapNotNull

Работает так же как `map`, но если `transform` вернула `null`, то элемент не будет добавлен в
преобразованный список.

```kotlin
fun main() {
    // formatted - это список из чисел 1, 2, 3 
    val formatted = listOf(1, 2, 3)
        // преобразованный в список строк
        .mapNotNull(
            // по следующему правилу: число из исходного списка (i) преобразуется 
            transform = { i ->
                // если число нечетное
                if (i % 2 != 0) {
                    // в строку в преобразованном списке, состоящую из текста "число", пробела и самого числа
                    "число $i"
                } else { // иначе
                    // ничего не добавляем в преобразованный список
                    null
                }
            }
        )
    // напечатать в консоль преобразованный список (число 1, число 3)
    println(formatted)
}
```

## Функция flatMap

Преобразует каждый элемент списка произвольного типа в свой отдельный список и склеивает эти списки
в один плоский список.

```kotlin
fun main() {
    // transformed- это список из чисел 1, 2, 3 
    val transformed = listOf(1, 2, 3)
        // преобразованный в другой список чисел
        .flatMap(
            // по следующему правилу: число из исходного списка (i) преобразуется 
            // в список из двух i и все элементы этого списка преобразуются в плоский список
            transform = { i -> listOf(i, i) }
        )
    // напечатать в консоль преобразованный список (1, 1, 2, 2, 3, 3)
    println(formatted)
}
```

## Функция any

Проверяет соблюдается ли условие хотя бы для одного элемента списка.

```kotlin
fun main() {
    //если хотя бы одно из чисел 1,2,3 
    if (listOf(1, 2, 3).any(
            // является нечетным
            predicate = { i -> i % 2 != 0 }
        )
    ) {
        // написать "нечетное нашлось"
        println("нечетное нашлось")
    }

}
```

## Функция all

Проверяет соблюдается ли условие для каждого элемента списка.

```kotlin
fun main() {
    //если все числа 1,2,3 
    if (listOf(1, 2, 3).all(
            // являются нечетными
            predicate = { i -> i % 2 != 0 }
        )
    ) {
        // написать "все нечетные"
        println("все нечетные")
    }

}
```

## Функция trim

Возвращает текст, но без пробельных символов в начале и конце.

```kotlin
fun main() {
    println(" все нечетные  ".trim())
}
```

## Функция filter

Вызывается у списка и возвращает список из всех его элементов, которые соответствуют условию.

```kotlin
fun main() {
    val filtered = listOf(1, 2, 3).filter { i ->
        i % 2 != 0
    }
    println(filtered)
}
```

## Функция contains

Проверяет содержится ли элемент в списке.

```kotlin
fun main() {
    val isContains = listOf(1, 2, 3).contains(1)
    if (isContains) {
        println("содержится")
    }
}
```

## Функция first

Позволяет получить первый элемент списка. Если список пустой, то программа завершится с ошибкой.

```kotlin
fun main() {
    val element = listOf(1, 2, 3).first()
    println(element)
}
```

## Функция get

Позволяет получить элемент списка по индексу (по отступу от начала списка). Если элемент отсутсвует
в начале списка,то программа завершится с ошибкой.

```kotlin
fun main() {
    val element = listOf(1, 2, 3).get(0)
    println(element) // выведется 1
}
```

```kotlin
fun main() {
    val element = listOf(1, 2, 3)[0] // сокращенная форма get
    println(element) // выведется 1
}
```